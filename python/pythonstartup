# .pythonstartup

# created: 20231129
# 
# adapted from: https://github.com/ambv/.dot_files/blob/master/pythonstartup
def autoimport(*modules):
    autoimported = set()
    for module in modules:
        if module.endswith(".*"):
            base = module[:-2]
            try:
                exec(
                    f"from {base} import *",
                    globals(),
                    globals(),
                )
            except ImportError:
                print(f"Failed to import {module}")
            autoimported.add(module)
        elif "." in module:
            base, name = module.rsplit(".", 1)
            try:
                exec(
                    f"from {base} import {name}",
                    globals(),
                    globals(),
                )
            except ImportError:
                print(f"Failed to import {module}")
            autoimported.add(name)
        else:
            try:
                exec(
                    f"import {module}",
                    globals(),
                    globals(),
                )
            except ImportError:
                print(f"Failed to import {module}")
            autoimported.add(module)

    print("Packages auto-imported for your convenience:")
    print(", ".join(sorted(autoimported)))


import os

if not os.environ.get("TESTING"):
    autoimport(
        "sys",
        "os",
        "re",
        "datetime",
        "time",
        # "asyncio",
        # "typing.*",
        "pathlib.Path",
        # "dataclasses.dataclass",
    )

print("...Startup file loaded...")
